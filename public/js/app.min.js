var t=t||{};t.flickrApi=function(){var t="https://api.flickr.com/services/rest/?method=flickr",e="&api_key=a5e95177da353f58113fd60296e1d250",o="&format=json&nojsoncallback=1",n={getPhotos:function(r){var c="&extras=date_upload,description,url_l,url_o&per_page=32&page="+r,i=t+".people.getPublicPhotos"+e+"&user_id=24662369@N07"+o+c;return n.sendRequestPromise(i)},getPhotoSizes:function(r){var c="&photo_id="+r,i=t+".photos.getSizes"+e+c+o;return n.sendRequestPromise(i)},sendRequestPromise:function(t){return axios.get(t,{headers:{Accept:"application/json","Content-Type":"apllication/json"},validateStatus:function(t){return 200===t}})}};return n},window.onload=function(){t.api=t.flickrApi(),t.photos=t.PhotoStore(),t.feed=t.photoFeed(),t.selected=t.selectedPhoto(),t.feed.init()},t.photoFeed=function(){var e=document.getElementById("photo-feed-list"),o={renderItems:function(t,n){var r=n||!1;if(r)for(;e.firstChild;)e.removeChild(e.firstChild);t.map(function(t){var n=o.buildItem(t);e.appendChild(n)})},buildItem:function(t){var e=document.createElement("li"),o=new Image;return overlay=document.createElement("span"),anchor=document.createElement("a"),anchor.href="#selected-photo",anchor.id=t.id,overlay.className="feed-item-overlay",anchor.appendChild(overlay),o.src=t.url_l,o.onload=function(){e.style.backgroundImage="url("+o.src+")"},e.appendChild(anchor),e.title=t.title,e.className="feed-item",e},sortFeed:function(){document.getElementById("sort-by-date").addEventListener("click",function(e){var n=parseInt(e.target.getAttribute("data-sort-dir"));oppSortDir=n*-1,cb=function(){o.renderItems(t.photos.currentPhotos,!0),document.getElementById(t.photos.currentPhotos[0].id).focus(),e.target.setAttribute("data-sort-dir",oppSortDir)},t.photos.sort(n,cb)})},loadMoreToFeed:function(){document.getElementById("load-more-photos").addEventListener("click",function(){t.photos.load().then(function(t){var e=t.data.photos.photo;o.renderItems(e),document.getElementById(e[0].id).focus()}).catch(function(t){console.log("Error:",t)})})},init:function(){t.photos.load().then(function(t){o.renderItems(t.data.photos.photo)}).catch(function(t){console.log("Error:",t)}),e.addEventListener("click",function(t){}),o.sortFeed(),o.loadMoreToFeed()}};return o},t.PhotoStore=function(){var e=0,o={_photos:[],get currentPhotos(){return this._photos},set currentPhotos(t){this._photos=t,console.log(t),console.log(this._photos),console.log("There are now %s photos",this._photos.length),console.log("The first photo is now %s",this._photos[0].title)},get currentPageNum(){return e},set currentPageNum(t){return e=t,o.currentPageNum},add:function(t){t.then(function(t){var e=o.currentPhotos.concat(t.data.photos.photo);o.currentPhotos=e}).catch(function(t){console.log("Error:",t)})},sort:function(t,e){var n=this.currentPhotos.sort(function(e,o){return t>0&&e.dateupload<o.dateupload||t<0&&e.dateupload>o.dateupload?-1:1}),r=[];for(var c in n)r.push(c.dateupload);o.currentPhotos=n,void 0!==e&&e()},load:function(){o.currentPageNum=++o.currentPageNum;var e=t.api.getPhotos(o.currentPageNum);return o.currentPageNum>1&&console.log("my pageNum is %s",o.currentPageNum),o.add(e),e},find:function(t){for(var e in photos)if(e.id===t)return e}};return o},t.Photo=function(){return{getBestSize:function(e){t.api.getPhotoSizes(e).then(function(t){t.sizes.sizes}).catch(function(t){console.log("Error:",t)})}}},t.selectedPhoto=function(){var e=(document.getElementById("selected-photo-container"),document.getElementById("selected-photo-title")),o=document.getElementById("selected-photo-description"),n=document.getElementById("selectedPhotoImg");return{renderSelectedPhoto:function(r){var c=t.photos.find(r);e.innerText=c.title,o=c.description.content,n=c.image}}};
//# sourceMappingURL=public/js/app.min.js.map