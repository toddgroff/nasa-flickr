var e=e||{};e.flickrApi=function(){var e="https://api.flickr.com/services/rest/?method=flickr",t="&api_key=a5e95177da353f58113fd60296e1d250",o="&format=json&nojsoncallback=1",n={getPhotos:function(r){var c="&extras=date_upload,description,url_l,url_o&per_page=36&page="+r,i=e+".people.getPublicPhotos"+t+"&user_id=24662369@N07"+o+c;return n.sendRequestPromise(i)},getPhotoSizes:function(r){var c="&photo_id="+r,i=e+".photos.getSizes"+t+c+o;return n.sendRequestPromise(i)},sendRequestPromise:function(e){return axios.get(e,{headers:{Accept:"application/json","Content-Type":"apllication/json"},validateStatus:function(e){return 200===e}})}};return n},window.onload=function(){e.api=e.flickrApi(),e.photos=e.PhotoStore(),e.photo=e.Photo(),e.feed=e.photoFeed(),e.selected=e.selectedPhoto(),e.feed.init()},e.photoFeed=function(){var t=document.getElementById("photo-feed-list"),o={renderItems:function(e,n){var r=n||!1;if(r)for(;t.firstChild;)t.removeChild(t.firstChild);e.map(function(e){var n=o.buildItem(e);t.appendChild(n)})},buildItem:function(e){var t=document.createElement("li"),o=new Image;return overlay=document.createElement("span"),anchor=document.createElement("a"),anchor.href="#selected-photo",anchor.id=e.id,overlay.className="feed-item-overlay",anchor.appendChild(overlay),o.src=e.url_l,o.onload=function(){t.style.backgroundImage="url("+o.src+")"},t.appendChild(anchor),t.title=e.title,t.className="feed-item",t},sortFeed:function(){document.getElementById("sort-by-date").addEventListener("click",function(t){var n=parseInt(t.target.getAttribute("data-sort-dir"));oppSortDir=n*-1,cb=function(){o.renderItems(e.photos.currentPhotos,!0),document.getElementById(e.photos.currentPhotos[0].id).focus(),t.target.setAttribute("data-sort-dir",oppSortDir)},e.photos.sort(n,cb)})},loadMoreToFeed:function(){document.getElementById("load-more-photos").addEventListener("click",function(){e.photos.load().then(function(e){var t=e.data.photos.photo;o.renderItems(t),document.getElementById(t[0].id).focus()}).catch(function(e){console.log("Error:",e)})})},setSelectPhoto:function(){t.addEventListener("click",function(t){var o=t.target.parentElement;"a"===o.nodeName.toLowerCase()&&(e.photos.currentSelected=o.id)})},init:function(){e.photos.load().then(function(e){o.renderItems(e.data.photos.photo)}).catch(function(e){console.log("Error:",e)}),o.sortFeed(),o.loadMoreToFeed(),o.setSelectPhoto(),e.selected.setClose()}};return o},e.PhotoStore=function(){var t={_photos:[],get currentPhotos(){return this._photos},set currentPhotos(e){this._photos=e},_selected:null,get currentSelected(){return this._selected},set currentSelected(t){this._selected=null===t?null:this.find(t),e.selected.render(this._selected)},_pageNum:0,get currentPageNum(){return this._pageNum},set currentPageNum(e){this._pageNum=e},add:function(e){e.then(function(e){var o=t.currentPhotos.concat(e.data.photos.photo);t.currentPhotos=o}).catch(function(e){console.log("Error:",e)})},sort:function(e,o){var n=this.currentPhotos.sort(function(t,o){return e>0&&t.dateupload<o.dateupload||e<0&&t.dateupload>o.dateupload?-1:1}),r=[];for(var c in n)r.push(c.dateupload);t.currentPhotos=n,void 0!==o&&o()},load:function(){t.currentPageNum+=1,console.count();var o=e.api.getPhotos(t.currentPageNum);return t.add(o),o},find:function(e){for(var t=this.currentPhotos,o=0;o<t.length;++o){if(t[o].id===e)return t[o];if(o===t.length-1)return null}}};return t},e.Photo=function(){return{getBestSize:function(t){e.api.getPhotoSizes(t).then(function(e){e.sizes.sizes}).catch(function(e){console.log("Error:",e)})}}},e.selectedPhoto=function(){var t=document.getElementById("selected-photo-container"),o=document.getElementById("selected-photo-title"),n=document.getElementById("selected-photo-description"),r=document.getElementById("selected-photo-close"),c=document.getElementById("selected-photo-copy"),i=document.createElement("img"),s={render:function(e){console.log("this photos is ",e),null===e?s.close():(i.src=e.url_o,i.className="selected-photo-img",i.alt=e.title,i.onload=function(){t.style.backgroundImage="url("+e.url_l+")",c.appendChild(i)},t.className+=" active",o.innerHTML=e.title,n.innerHTML=e.description._content)},setClose:function(){r.addEventListener("click",function(){e.photos.currentSelected=null}),r.addEventListener("keyup",function(t){27===t.keyCode&&(e.photos.currentSelected=null)},!1)},close:function(){var e=t.className.replace(/img-loaded/g,"").replace(/active/g,"");t.className=e}};return s};
//# sourceMappingURL=public/js/app.min.js.map