var e=e||{};e.flickrApi=function(){var e="https://api.flickr.com/services/rest/?method=flickr",t="&api_key=a5e95177da353f58113fd60296e1d250",o="&format=json&nojsoncallback=1",n={getPhotos:function(r){var c="&extras=date_upload,description,url_l,url_o&per_page=32&page="+r,s=e+".people.getPublicPhotos"+t+"&user_id=24662369@N07"+o+c;return n.sendRequestPromise(s)},getPhotoSizes:function(r){var c="&photo_id="+r,s=e+".photos.getSizes"+t+c+o;return n.sendRequestPromise(s)},sendRequestPromise:function(e){return axios.get(e,{headers:{Accept:"application/json","Content-Type":"apllication/json"},validateStatus:function(e){return 200===e}})}};return n},window.onload=function(){e.api=e.flickrApi(),e.photos=e.PhotoStore(),e.photo=e.Photo(),e.feed=e.photoFeed(),e.selected=e.selectedPhoto(),e.feed.init()},e.photoFeed=function(){var t=document.getElementById("photo-feed-list"),o={renderItems:function(e,n){var r=n||!1;if(r)for(;t.firstChild;)t.removeChild(t.firstChild);e.map(function(e){var n=o.buildItem(e);t.appendChild(n)})},buildItem:function(e){var t=document.createElement("li"),o=new Image;return overlay=document.createElement("span"),anchor=document.createElement("a"),anchor.href="#selected-photo",anchor.id=e.id,overlay.className="feed-item-overlay",anchor.appendChild(overlay),o.src=e.url_l,o.onload=function(){t.style.backgroundImage="url("+o.src+")"},t.appendChild(anchor),t.title=e.title,t.className="feed-item",t},sortFeed:function(){document.getElementById("sort-by-date").addEventListener("click",function(t){var n=parseInt(t.target.getAttribute("data-sort-dir"));oppSortDir=n*-1,cb=function(){o.renderItems(e.photos.currentPhotos,!0),document.getElementById(e.photos.currentPhotos[0].id).focus(),t.target.setAttribute("data-sort-dir",oppSortDir)},e.photos.sort(n,cb)})},loadMoreToFeed:function(){document.getElementById("load-more-photos").addEventListener("click",function(){e.photos.load().then(function(e){var t=e.data.photos.photo;o.renderItems(t),document.getElementById(t[0].id).focus()}).catch(function(e){console.log("Error:",e)})})},setSelectPhoto:function(){t.addEventListener("click",function(t){var o=t.target.parentElement;console.log("id from target","a"===anchor.nodeName.toLowerCase()),"a"===o.nodeName.toLowerCase()&&(e.photos.currentSelected=o.id)})},init:function(){e.photos.load().then(function(e){o.renderItems(e.data.photos.photo)}).catch(function(e){console.log("Error:",e)}),o.sortFeed(),o.loadMoreToFeed(),o.setSelectPhoto(),e.selected.setclose()}};return o},e.PhotoStore=function(){var t=0,o={_photos:[],get currentPhotos(){return this._photos},set currentPhotos(e){this._photos=e,console.log("There are now %s photos",this._photos.length),console.log("The first photo is now %s",this._photos[0].title)},_selected:null,get currentSelected(){return this._selected},set currentSelected(t){console.log("id coming in as ",t),this._selected=null===t?null:this.find(t),console.log("selected",this.find(t)),null!==this.currentSelected&&console.log("Photo #%s is now selected",this._selected),e.selected.render(this._selected)},get currentPageNum(){return t},set currentPageNum(e){t=e,console.log("the current page is now %s",o.currentPageNum)},add:function(e){e.then(function(e){var t=o.currentPhotos.concat(e.data.photos.photo);o.currentPhotos=t}).catch(function(e){console.log("Error:",e)})},sort:function(e,t){var n=this.currentPhotos.sort(function(t,o){return e>0&&t.dateupload<o.dateupload||e<0&&t.dateupload>o.dateupload?-1:1}),r=[];for(var c in n)r.push(c.dateupload);o.currentPhotos=n,void 0!==t&&t()},load:function(){o.currentPageNum+=1,console.count();var t=e.api.getPhotos(o.currentPageNum);return o.currentPageNum>1&&console.log("my pageNum is %s",o.currentPageNum),o.add(t),t},find:function(e){for(var t=0;t<this.currentPhotos.length;++t)if(this.currentPhotos[t].id===e)return this.currentPhotos[t]}};return o},e.Photo=function(){return{getBestSize:function(t){e.api.getPhotoSizes(t).then(function(e){e.sizes.sizes}).catch(function(e){console.log("Error:",e)})}}},e.selectedPhoto=function(){var t=document.getElementById("selected-photo-container"),o=document.getElementById("selected-photo-title"),n=document.getElementById("selected-photo-description"),r=document.getElementById("selected-photo-img"),c=document.getElementById("selected-photo-close");return self={render:function(e){null===e?self.close():(o.innerText=e.title,n.innerText=e.description._content,t.className+=" active",r.onload=function(o){t.style.backgroundImage=e.url_l,o.target.parentElement.className+=" img-loaded"})},setClose:function(){c.addEventListener("click",function(){e.photos.currentSelected=null})},close:function(){t.className.replace(/active/i,"")}},self};
//# sourceMappingURL=public/js/app.min.js.map