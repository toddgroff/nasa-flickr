var e=e||{};e.flickrApi=function(){var e="https://api.flickr.com/services/rest/?method=flickr",t="&api_key=a5e95177da353f58113fd60296e1d250",o="&format=json&nojsoncallback=1",n={getPhotos:function(r){var c="&extras=date_upload,date_taken,description,url_l,url_o,tags,count_faves&per_page=36&page="+r,s=e+".people.getPublicPhotos"+t+"&user_id=24662369@N07"+o+c;return n.sendRequestPromise(s)},getPhotoSizes:function(r){var c="&photo_id="+r,s=e+".photos.getSizes"+t+c+o;return n.sendRequestPromise(s)},sendRequestPromise:function(e){return axios.get(e,{headers:{Accept:"application/json","Content-Type":"apllication/json"},validateStatus:function(e){return 200===e}})}};return n},window.onload=function(){e.api=e.flickrApi(),e.photos=e.PhotoStore(),e.photo=e.Photo(),e.feed=e.photoFeed(),e.selected=e.selectedPhoto(),e.feed.init()},e.photoFeed=function(){var t=document.getElementById("photo-feed-list"),o={renderItems:function(e,n){var r=n||!1;if(r)for(;t.firstChild;)t.removeChild(t.firstChild);e.map(function(e){var n=o.buildItem(e);t.appendChild(n)})},buildItem:function(e){var t=document.createElement("li"),o=new Image;return overlay=document.createElement("span"),anchor=document.createElement("a"),anchor.href="#selected-photo",anchor.id=e.id,overlay.className="feed-item-overlay",anchor.appendChild(overlay),o.src=e.url_l,o.onload=function(){t.style.backgroundImage="url("+o.src+")"},t.appendChild(anchor),t.title=e.title,t.className="feed-item",t},sortFeed:function(t){var n=parseInt(t.target.getAttribute("data-sort-dir")),r=n*-1,c=t.target.getAttribute("data-sort-prop");cb=function(){o.renderItems(e.photos.currentPhotos,!0),document.getElementById(e.photos.currentPhotos[0].id).focus(),t.target.setAttribute("data-sort-dir",r)},e.photos.sort(n,c,cb)},setSortFeed:function(){document.getElementById("sort-by-date").addEventListener("click",function(e){o.sortFeed(e)},!1),document.getElementById("sort-by-faves").addEventListener("click",function(e){o.sortFeed(e)},!1)},loadMoreToFeed:function(){window.addEventListener("scroll",function(t){if(window.innerHeight+window.scrollY>=document.body.offsetHeight){var n=document.getElementById("loading-photos-message");n.className+=" active",e.photos.load().then(function(e){var t=e.data.photos.photo;o.renderItems(t),document.getElementById(t[0].id).focus(),setTimeout(function(){n.className=n.className.replace(/active/g,"")},1e3)}).catch(function(e){console.log("Error:",e)})}})},setSelectPhoto:function(){var o=function(e){return e.target.parentElement},n=function(e){return"a"===e.nodeName.toLowerCase()},r=function(t,n){var r=n||!1;t.preventDefault(),e.photos.currentSelected=r?o(t).id:t.target.id};t.addEventListener("click",function(e){n(o(e))&&r(e,!0)}),t.addEventListener("keydown",function(e){n(e.target)&&13===e.keyCode&&r(e)})},init:function(){e.photos.load().then(function(e){o.renderItems(e.data.photos.photo)}).catch(function(e){console.log("Error:",e)}),o.setSortFeed(),o.loadMoreToFeed(),o.setSelectPhoto(),e.selected.setClose()}};return o},e.PhotoStore=function(){var t={_photos:[],get currentPhotos(){return this._photos},set currentPhotos(e){this._photos=e},_selected:null,get currentSelected(){return this._selected},set currentSelected(t){this._selected=null===t?null:this.find(t),e.selected.render(this._selected)},_pageNum:0,get currentPageNum(){return this._pageNum},set currentPageNum(e){this._pageNum=e},add:function(e){e.then(function(e){var o=t.currentPhotos.concat(e.data.photos.photo);t.currentPhotos=o}).catch(function(e){console.log("Error:",e)})},sort:function(e,o,n){var r=this.currentPhotos.sort(function(t,n){return e>0&&parseInt(t[o])<parseInt(n[o])||e<0&&parseInt(t[o])>parseInt(n[o])?-1:1});t.currentPhotos=r,void 0!==n&&n()},load:function(){t.currentPageNum+=1;var o=e.api.getPhotos(t.currentPageNum);return t.add(o),o},find:function(e){for(var t=this.currentPhotos,o=0;o<t.length;++o){if(t[o].id===e)return t[o];if(o===t.length-1)return null}}};return t},e.Photo=function(){return{getBestSize:function(t){e.api.getPhotoSizes(t).then(function(e){e.sizes.sizes}).catch(function(e){console.log("Error:",e)})}}},e.selectedPhoto=function(){var t=document.getElementById("selected-photo-container"),o=document.getElementById("selected-photo-title"),n=document.getElementById("selected-upload-date"),r=document.getElementById("selected-fave-count"),c=document.getElementById("selected-photo-tags"),s=document.getElementById("selected-photo-description"),i=document.getElementById("selected-photo-close"),a=document.getElementById("selected-photo-copy"),d=document.getElementById("selected-photo-img"),l={render:function(e){if(null===e)l.close();else{var u=new Image;if(d.src=e.url_l,d.className="selected-photo-img",d.alt=e.title,d.onload=function(){t.style.backgroundImage="url("+e.url_l+")",a.appendChild(d)},u.src=e.url_o,u.onload=function(){t.style.backgroundImage="url("+e.url_o+")"},t.className+=" active",o.innerHTML=e.title,n.innerHTML=new Date(1e3*e.dateupload).toString().split(" ").slice(0,4).join(" "),r.innerHTML=e.count_faves,c.innerHTML="",e.tags.length>0)for(var h=e.tags.split(" "),f=0;f<h.length;++f){var p=document.createElement("span");p.innerText=h[f],p.className="photo-tag",c.appendChild(p)}s.innerHTML=e.description._content,i.focus()}},setFocus:function(e){var t=e.id;document.getElementById(t).focus()},setClose:function(){document.addEventListener("keydown",function(t){27==t.keyCode&&(l.setFocus(e.photos.currentSelected),e.photos.currentSelected=null)},!1),i.addEventListener("click",function(){l.setFocus(e.photos.currentSelected),e.photos.currentSelected=null},!1)},close:function(){var e=t.className.replace(/img-loaded/g,"").replace(/active/g,"");t.className=e}};return l};
//# sourceMappingURL=public/js/app.min.js.map